<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>QR Test – Blood Bag</title>

  <!-- QR Library -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrious/4.0.2/qrious.min.js"></script>

  <style>
    body {
      background: #0f1117;
      color: white;
      font-family: Arial, sans-serif;
      text-align: center;
      padding: 40px;
    }
    .card {
      background: #161b22;
      padding: 20px;
      border-radius: 12px;
      width: 300px;
      margin: auto;
      box-shadow: 0px 0px 20px rgba(0,0,0,0.4);
    }
    #qrcode {
      margin-top: 20px;
      margin-bottom: 20px;
    }
    pre {
      background: #11171f;
      padding: 15px;
      border-radius: 8px;
      overflow-x: auto;
    }
  </style>
</head>

<body>

  <h1>QR Test Interface</h1>
  <p>Scan the QR below to see if the phone reads it correctly.</p>

  <div class="card">
    <h2>Bag Details</h2>

    <canvas id="qrcode"></canvas>

    <pre id="qr_text"></pre>
  </div>

  <script>
    // -------- Simple Bag Details ---------
    const bag = {
      bag_id: "BAG_0008",
      blood_type: "B-",
      timestamp: new Date().toLocaleString(),
      Health_Index: 0.9971,
      temp_mean: 2.9847,
      hum_mean: 59.8466,
      accel_rms: 0.0846,
      door_count: 0
    };

    // -------- Text to show in QR --------
    const qrText =
      `Bag: ${bag.bag_id} (${bag.blood_type})\n` +
      `Updated: ${bag.timestamp}\n\n` +
      `HI: ${bag.Health_Index}\n` +
      `Temp: ${bag.temp_mean} °C\n` +
      `Humidity: ${bag.hum_mean} %\n` +
      `Vibration: ${bag.accel_rms}\n` +
      `Door Count: ${bag.door_count}`;

    // show text on page
    document.getElementById("qr_text").innerText = qrText;

    // generate QR
    const qr = new QRious({
      element: document.getElementById("qrcode"),
      value: qrText,
      size: 260,        // BIG size → easier to scan
      level: "H",       // high correction
      foreground: "#000000",
      background: "#ffffff"
    });
  </script>

</body>
</html>
